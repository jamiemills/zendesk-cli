@startuml C4-Container
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title Container Diagram - Zendesk CLI Internal Structure

Person(user, "Support Agent/Manager")
System_Ext(zendesk_api, "Zendesk API")
System_Ext(system_keyring, "System Keyring")
System_Ext(file_system, "File System")

System_Boundary(cli_system, "Zendesk CLI") {
    Container(cli_interface, "CLI Interface", "Click Framework", "Command parsing, user interaction, output formatting")
    Container(business_services, "Business Services", "Python", "Ticket operations, authentication, configuration management")
    Container(api_client, "API Client", "Requests Library", "HTTP client with retry logic, error handling, rate limiting")
    Container(data_models, "Data Models", "Pydantic", "Ticket, User, Group models with validation")
    Container(utilities, "Utilities", "Python", "Date calculations, logging, configuration file handling")
}

Rel(user, cli_interface, "Commands", "zendesk tickets, zendesk configure")
Rel(cli_interface, business_services, "Delegates operations")
Rel(business_services, api_client, "API calls")
Rel(business_services, data_models, "Creates/validates")
Rel(cli_interface, utilities, "Logging, formatting")
Rel(business_services, utilities, "Date calculations, config")

Rel(api_client, zendesk_api, "HTTPS requests", "GET /api/v2/search.json, /users/me.json, /groups.json")
Rel(utilities, system_keyring, "Secure storage", "API token storage/retrieval")
Rel(utilities, file_system, "File operations", "config.json, CSV exports")

@enduml